<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>نظام الأرشيف الذكي - النسخة المتطورة</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, deleteDoc, doc, updateDoc, writeBatch, getDocs } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";const firebaseConfig = { apiKey: "AIzaSyC-RyeNVI6aNmWSJIYhQCG_4J_RQDAovds", authDomain: "student-archive-f8689.firebaseapp.com", projectId: "student-archive-f8689", storageBucket: "student-archive-f8689.appspot.com", messagingSenderId: "815104091476", appId: "1:815104091476:web:8e725238d8ebabaf26d4c1" };

const app = initializeApp(firebaseConfig); const db = getFirestore(app); const auth = getAuth(app); const studentsCol = collection(db, "students");

window.allStudentsData = []; let deleteTargetId = null; let unsavedChanges = false; window.showToast = (msg, type = 'success') => { const container = document.getElementById('toastContainer'); const toast = document.createElement('div'); toast.className = toast ${type}; toast.innerHTML = <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-trash-alt'}"></i> ${msg}; container.appendChild(toast); setTimeout(() => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 500); }, 3000); };

onAuthStateChanged
